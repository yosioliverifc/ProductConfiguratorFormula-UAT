function generateFormulaDirectory(t,e){var r=stringKres+e;$(r).empty();for(var n,o,a,i=[],l=[],u="",s=0;s<t.length;s++)if(o=t[s].productState,o==stringStateTrue){if(n=t[s].productKey,0==s&&(u+="<ul class='DirectoryProduct'>"),u+="<li class='ListProduct'>"+t[s].productText,u+='<input type="button" class="ButtonAddSecondary ButtonIcon" onclick="addFormulaForm(JSONLayoutFromURL, arrayInputSection, arrayInputKey, \''+t[s].productKey+"')\">",i=t[s].productContent,l=i.formula,0!=l.length){for(var S=0;S<l.length;S++)0==S&&(u+="<br><ul class='DirectorySection'>"),a=l[S].formulaKey,u+="<li class='ListSection'>"+l[S].formulaText,u+='<input type="button" class="ButtonDeleteSecondary ButtonIcon" onclick="deleteDirectory(JSONFormulaFromURL, \''+n+"', '"+a+"')\">",u+='<input type="button" class="ButtonEditSecondary ButtonIcon" onclick="setFormulaForm(\'LayoutContainer\', JSONLayoutFromURL, JSONFormulaFromURL, \''+n+"', '"+a+"')\">",u+="</li>";u+="</ul>"}u+="</li>"}$(r).html(u)}function addFormulaForm(t,e,r,n){$("#SpanHeaderProduct").attr("data-product-key",n);var o="TextFormulaConfiguratorFormulaKey",a=stringKres+o;JSONInputSection=generateSelectOptionByJSONLayoutForInputSection(t,e,n),JSONInputKey=generateSelectOptionByJSONLayoutForInputKey(t,r,n),$(a).prop("readonly",!1),resetSpecific("MainContent",["FormulaContent"]),curtainToggle("CurtainNoItemSelected",!1)}function setFormulaForm(t,e,r,n,o){var a,i,l,u,s,S,c,m,g,y=(stringKres+t,"TextFormulaConfiguratorFormulaKey"),F=stringKres+y;JSONInputSection=generateSelectOptionByJSONLayoutForInputSection(e,arrayInputSection,n),JSONInputKey=generateSelectOptionByJSONLayoutForInputKey(e,arrayInputKey,n),JSONProductFiltered=JSONFilter(r,[stringJSONKeyProductKey],[n],null),i=JSONProductFiltered[stringJSONKeyProductContent],a=JSONProductFiltered[stringJSONKeyProductText],l=i[stringJSONKeyFormula],g=JSONFilter(l,[stringJSONKeyFormulaKey],[o],null),u=g[stringJSONKeyFormulaKey],S=g[stringJSONKeyFormulaState],s=g[stringJSONKeyFormulaText],c=g[stringJSONKeyFormulaContent],m=g[stringJSONKeyInputKey],resetSpecific("MainContent",["FormulaContent"]),$(F).prop("readonly",!0),$("#SpanHeaderProduct").text(a),$("#SpanHeaderFormula").text(s),$("#TitleHeaderFormula").text(s),$("#SpanHeaderProduct").attr("data-product-key",n),$("#SpanHeaderFormula").attr("data-formula-key",u),setGeneralTextForm("TextFormulaConfiguratorFormulaKey",u),setGeneralTextForm("TextFormulaConfiguratorFormulaText",s),setGeneralSelectForm("SelectFormulaConfiguratorInputResultSection",getInfix(releasePrefix(m)).toLowerCase()),setGeneralSelectForm("SelectFormulaConfiguratorInputResultKey",m),setGeneralSelectForm("SelectFormulaConfiguratorFormulaState",S),formulaContentGenerator(c,"FormulaContent","SpanFormulaDetail"),curtainToggle("CurtainNoItemSelected",!1)}function deleteDirectory(t,e,r){confirm("Are you sure you want to delete this formula ?.")&&(JSONProductFiltered=JSONFilter(t,[stringJSONKeyProductKey],[e],null),JSONProductContent=JSONProductFiltered[stringJSONKeyProductContent],stringJSONProductText=JSONProductFiltered[stringJSONKeyProductText],JSONFormula=JSONProductContent[stringJSONKeyFormula],JSONCustomDelete(JSONFormula,[stringJSONKeyFormulaKey],[r]),resetSpecific("MainContent",["FormulaContent"]),curtainToggle("CurtainNoItemSelected",!0),generateFormulaDirectory(JSONFormulaFromURL,"GeneratedFormula"))}function generateSelectOptionByJSONInput(t){for(var e,r,n,o,a,i=0;i<t.length;i++){e=t[i].inputKey,r=t[i].inputType,n=t[i].inputPlaceholder,o=t[i].inputValue,a=t[i].inputState;for(var l=[],u=n.split(stringJSONArraySeparator),s=o.split(stringJSONArraySeparator),S=0;S<s.length;S++)l.push({value:s[S],text:u[S]});generateSelectOption(e,l)}return l}function generateSelectOptionByInfix(t,e,r){var n,o,a,i=stringKres+t,l=stringKres+e,u="";a=$(i).val();for(var s=0;s<r.length;s++)n=releasePrefix(r[s].value),o=getInfix(n),a==stringStateNotSelected?u+="<option value='"+r[s].value+"'>"+r[s].text+"</option>":a.toLowerCase()==o.toLowerCase()&&(u+="<option value='"+r[s].value+"'>"+r[s].text+"</option>");null==u||void 0==u||""==u||($(l).empty(),$(l).html(u))}function generateJSONSelectOptionByJSONInput(t,e){for(var r,n,o,a,i,l,u=[],s=0;s<t.length;s++)if(r=t[s].inputKey,r==e){n=t[s].inputPlaceholder,o=t[s].inputValue,a=n.split(stringJSONArraySeparator),i=o.split(stringJSONArraySeparator),l=!0;for(var S=0;S<i.length;S++)1==l&&(u.push({value:stringStateNotSelected,text:"Please Select"}),l=!1),u.push({value:i[S],text:a[S]});s=t.length}return u}function formulaContentGenerator(t,e){if(void 0==t||null==t||""==t);else if(0!=t.length){var r=t.split(stringJSONArraySeparator),n=stringKres+e;$(n).empty();for(var o=0;o<r.length;o++)$(n).append(generateFormula(r[o],indicatorPrefix(r[o]),!1,!0,!0));formulaVerificator(e)}}function formulaTemporaryContentGenerator(t,e){if(void 0==t||null==t||""==t);else if(0!=t.length){var r=t.split(stringJSONArraySeparator),n=stringKres+e;$(n).empty();for(var o=0;o<r.length;o++)$(n).append(generateFormulaTemporary(r[o],indicatorPrefix(r[o]),!1,!1,!0));formulaVerificator(e)}}function generateFormula(t,e,r,n,o){var a="";return a+="<div class='FormulaContainer' id='"+t+"'><span class='SpanFormulaHeader'>"+t+"</span><span class='SpanFormulaDetail'>"+e+"</span>",1==r|1==n|1==o&&(a+="<div class='PositionerCenter Center'>"),1==r&&(a+="<input type='button' class='ButtonFormula ButtonSearchPrimary' value=''>"),1==n&&(a+="<input type='button' class='ButtonFormula ButtonEditPrimary' value=''>"),1==o&&(a+="<input type='button' class='ButtonFormula ButtonDeletePrimary' value='' onclick='formulaContentDelete(JSONFormulaFromURL, this, \"FormulaContent\")'>"),1==r|1==n|1==o&&(a+="</div>"),a+="</div>"}function generateFormulaTemporary(t,e,r,n,o){var a="";return a+="<div class='FormulaContainer' id='"+t+"'><span class='SpanFormulaHeader'>"+t+"</span><span class='SpanFormulaDetail'>"+e+"</span>",1==r|1==n|1==o&&(a+="<div class='PositionerCenter Center'>"),1==r&&(a+="<input type='button' class='ButtonFormula ButtonSearchPrimary' value=''>"),1==n&&(a+="<input type='button' class='ButtonFormula ButtonEditPrimary' value=''>"),1==o&&(a+="<input type='button' class='ButtonFormula ButtonDeletePrimary' value='' onclick='formulaContentDeleteTemporary(JSONFormulaFromURL, this, \"FormulaContent\")'>"),1==r|1==n|1==o&&(a+="</div>"),a+="</div>"}function formulaTemporaryContentAdd(t,e,r,n){for(var o,a,i=!1,l=0;l<e.length;l++)o=stringKres+e[l],"none"!=$(o).parent().css("display")&&(a=getGeneralInputForm(e[l]));null==a|void 0==a|""==a||(0==t[stringJSONKeyFormulaContent].length?t[stringJSONKeyFormulaContent]=a:t[stringJSONKeyFormulaContent]+=stringJSONArraySeparator+a,i=!0),1==i&&(previewJSONFormulaSingle(t),popUpToggle(stringCurtainJavaScriptID,r),formulaTemporaryContentGenerator(t[stringJSONKeyFormulaContent],n))}function formulaContentAdd(t,e,r,n){for(var o,a,i,l,u=stringKres+"SpanHeaderProduct",s=$(u).attr("data-product-key"),S=getGeneralTextForm("TextFormulaConfiguratorFormulaKey"),c=0;c<e.length;c++)o=stringKres+e[c],"none"!=$(o).parent().css("display")&&(a=getGeneralInputForm(e[c]));if(null==a|void 0==a|""==a);else{JSONProductFiltered=JSONFilter(t,[stringJSONKeyProductKey],[s],null),i=JSONProductFiltered[stringJSONKeyProductContent],JSONFormula=i[stringJSONKeyFormula];for(var m=0;m<JSONFormula.length;m++)l=JSONFormula[m][stringJSONKeyFormulaKey],l==S&&(0==JSONFormula[m][stringJSONKeyFormulaContent].length?JSONFormula[m][stringJSONKeyFormulaContent]=a:JSONFormula[m][stringJSONKeyFormulaContent]+=stringJSONArraySeparator+a,previewJSONFormulaSingle(JSONFormula[m]),popUpToggle(stringCurtainJavaScriptID,r),formulaContentGenerator(JSONFormula[m][stringJSONKeyFormulaContent],n),m=JSONFormula.length)}}function formulaContentDelete(t,e,r){$(e).parent().parent().attr("id");if(confirm("Are you sure you want to delete this part of formula ?.")){var n,o=stringKres+"SpanHeaderProduct",a=$(o).attr("data-product-key"),i=getGeneralTextForm("TextFormulaConfiguratorFormulaKey");JSONProductFiltered=JSONFilter(t,[stringJSONKeyProductKey],[a],null),JSONProductContent=JSONProductFiltered[stringJSONKeyProductContent],JSONFormula=JSONProductContent[stringJSONKeyFormula];for(var l=0;l<JSONFormula.length;l++)stringJSONFormulaKey=JSONFormula[l][stringJSONKeyFormulaKey],stringJSONFormulaKey==i&&(n=JSONFormula[l][stringJSONKeyFormulaContent],$($(e).parent().parent()).remove(),n=getFormulaContentFromLayout("FormulaContent"),JSONFormula[l][stringJSONKeyFormulaContent]=n,formulaContentGenerator(JSONFormula[l][stringJSONKeyFormulaContent],r),l=JSONFormula.length)}}function formulaContentDeleteTemporary(t,e,r){$(e).parent().parent().attr("id");confirm("Are you sure you want to delete this part of formula ?.")&&(stringFormulaContent=t[stringJSONKeyFormulaContent],$($(e).parent().parent()).remove(),stringFormulaContent=getFormulaContentFromLayout("FormulaContent"),t[stringJSONKeyFormulaContent]=stringFormulaContent,formulaTemporaryContentGenerator(t[stringJSONKeyFormulaContent],r),previewJSONFormulaSingle(t))}function formulaContentEdit(t){$(t).parent().parent()}function formulaVerificator(t){var e=stringKres+t,r=stringDot+"SpanHeaderDetail",n=$(e+" "+r).map(function(){return $(this).text()}).get(),o=n.join(""),a=!0;o.indexOf(stringStateOperator+stringStateOperator+stringStateOperator)>=0?a=!1:o.indexOf(stringStateInput+stringStateInput)>=0?a=!1:o.indexOf(stringStateConstant+stringStateConstant)>=0&&(a=!1),1==a?$(e).css("background-color","transparent"):$(e).css("background-color","red")}function formulaTemporarySave(t,e){var r=getGeneralTextForm("TextFormulaConfiguratorFormulaKey"),n=getGeneralTextForm("TextFormulaConfiguratorFormulaText"),o=getFormulaContentFromLayout("FormulaContent"),a=getGeneralSelectForm("SelectFormulaConfiguratorInputKey"),i=getGeneralSelectForm("SelectFormulaConfiguratorFormulaState");t[stringJSONKeyFormulaKey]=r,t[stringJSONKeyFormulaText]=n,t[stringJSONKeyFormulaContent]=o,t[stringJSONKeyInputKey]=a,t[stringJSONKeyFormulaState]=i,alert(e+JSON.stringify(t)),changePage(e+JSON.stringify(t))}function formulaTemporaryCancel(t,e){console.log(t),alert(e+JSON.stringify(t)),changePage(e+JSON.stringify(t))}function formulaSave(t,e){var r,n,o,a,i=stringKres+"SpanHeaderProduct",l=$(i).attr("data-product-key"),u=getGeneralTextForm("TextFormulaConfiguratorFormulaKey"),s=getGeneralTextForm("TextFormulaConfiguratorFormulaText"),S=getGeneralSelectForm("SelectFormulaConfiguratorInputKey"),c=getGeneralSelectForm("SelectFormulaConfiguratorFormulaState");if(JSONProductFiltered=JSONFilter(t,[stringJSONKeyProductKey],[l],null),a=JSONProductFiltered[stringJSONKeyProductContent],n=JSONProductFiltered[stringJSONKeyProductKey],o=JSONProductFiltered[stringJSONKeyProductState],JSONFormula=a[stringJSONKeyFormula],JSONFormulaFiltered=JSONFilter(JSONFormula,[stringJSONKeyFormulaKey],[u],null),r=getFormulaContentFromLayout("FormulaContent"),null==JSONFormulaFiltered||void 0==JSONFormulaFiltered){var m=[stringJSONKeyFormulaKey,stringJSONKeyFormulaText,stringJSONKeyFormulaContent,stringJSONKeyInputKey,stringJSONKeyFormulaState],g=[u,s,r,S,c];JSONCustomAdd(JSONFormula,m,g)}else JSONFormulaFiltered[stringJSONKeyFormulaKey]=u,JSONFormulaFiltered[stringJSONKeyFormulaText]=s,JSONFormulaFiltered[stringJSONKeyFormulaContent]=r,JSONFormulaFiltered[stringJSONKeyInputKey]=S,JSONFormulaFiltered[stringJSONKeyFormulaState]=c;alert(e+JSON.stringify(JSONFormula)),resetSpecific("MainContent",["FormulaContent"]),curtainToggle("CurtainNoItemSelected",!0),generateFormulaDirectory(JSONFormulaFromURL,"GeneratedFormula")}function getFormulaContentFromLayout(t){var e=stringKres+t,r=stringDot+"SpanFormulaHeader",n=$(e+" "+r).map(function(){return $(this).text()}).get();return n.join(stringJSONArraySeparator)}function previewJSONFormula(t){for(var e="",r=0;r<t.length;r++)e+="formulaKey : "+t[r][stringJSONKeyFormulaKey]+"\nformulaContent : "+t[r][stringJSONKeyFormulaContent]+"\ninputKey : "+t[r][stringJSONKeyInputKey]+"\nformulaState : "+t[r][stringJSONKeyFormulaState];alert(e)}function previewJSONFormulaSingle(t){var e="formulaKey : "+t[stringJSONKeyFormulaKey]+"\nformulaContent : "+t[stringJSONKeyFormulaContent]+"\ninputKey : "+t[stringJSONKeyInputKey]+"\nformulaState : "+t[stringJSONKeyFormulaState];alert(e)}
